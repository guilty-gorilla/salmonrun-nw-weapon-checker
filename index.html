<DOCTYPE html>
  <html>
    <head>
      <meta charset=utf-8" />
      <title>サモランNW 武器チェッカー</title>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.1/dist/js.cookie.min.js"></script>
      <link rel="stylesheet" href="css/common.css" type="text/css" />
      <script type="text/javascript">
        jQuery(function($){
            //チェックボックスにクッキーの値を反映する
            if(Cookies.get('ccheck_value')){
  
                let load_values = Cookies.get('ccheck_value').split(",");
                for(var i = 0; i < load_values.length; ++i){
                    load_values[i] = decodeURIComponent(load_values[i]);
                }
  
                $("input[type=checkbox][name=image]").each(function(){
                    this.checked = $.inArray(this.value, load_values) != -1;
                });

                let chk = Cookies.get('chk_value');
                let cnt = Cookies.get('cnt_value');
                let elem = document.getElementById("counter");
                elem.innerHTML = "<h2>" + chk + " / " + cnt + "</h2>";
            }else{

              let cnt = 0;
              let elem = document.getElementById("counter");

              $("input[type=checkbox][name=image]").each(function(){
                cnt = cnt + 1;
              });

              elem.innerHTML = "<h2>" + 0 + " / " + cnt + "</h2>";
            }
  
            //チェックを変えたらイベント発火
            $("input[type=checkbox][name=image]").change(function(){
                let save_values = [];
                let chk = 0;
                let cnt = 0;
  
                $("input[type=checkbox][name=image]").each(function(){
                  if(this.checked){
                    chk = chk + 1;
  
                  }
                    this.checked && save_values.push(encodeURIComponent(this.value));
                    cnt = cnt + 1;
                });
  
                // TODO ここにHTML更新の処理追加　chkにチェックされた数が入っている
                let elem = document.getElementById("counter");
                elem.innerHTML = "<h2>" + chk + " / " + cnt + "</h2>";
  
                Cookies.set('ccheck_value', save_values.join(","), { expires: 7 });
                Cookies.set('chk_value', chk, { expires: 7 });
                Cookies.set('cnt_value', cnt, { expires: 7 });
            });
        });
      </script>
    </head>
  <body>
    <h2>サモランNW 武器チェッカー </h2>
    <ul id="weapons" class="clearfix">
      <input id="01_01" type="checkbox" value="01_01.png" name="image">
      <li>
        <label for="01_01"><img src="img/01_01.png" /></label>
      </li>
      <input id="01_02" type="checkbox" value="01_02.png" name="image">
      <li>
        <label for="01_02"><img src="img/01_02.png" /></label>
      </li>
      <input id="01_03" type="checkbox" value="01_03.png" name="image">
      <li>
        <label for="01_03"><img src="img/01_03.png" /></label>
      </li>      
      <input id="01_04" type="checkbox" value="01_04.png" name="image">
      <li>
        <label for="01_04"><img src="img/01_04.png" /></label>
      </li>      
      <input id="01_05" type="checkbox" value="01_05.png" name="image">
      <li>
        <label for="01_05"><img src="img/01_05.png" /></label>
      </li>      
      <input id="01_06" type="checkbox" value="01_06.png" name="image">
      <li>
        <label for="01_06"><img src="img/01_06.png" /></label>
      </li>      
      <input id="01_07" type="checkbox" value="01_07.png" name="image">
      <li>
        <label for="01_07"><img src="img/01_07.png" /></label>
      </li>
      <input id="01_08" type="checkbox" value="01_08.png" name="image">
      <li>
        <label for="01_08"><img src="img/01_08.png" /></label>
      </li>      
      <input id="01_09" type="checkbox" value="01_09.png" name="image">
      <li>
        <label for="01_09"><img src="img/01_09.png" /></label>
      </li>      
      <input id="01_10" type="checkbox" value="01_10.png" name="image">
      <li>
        <label for="01_10"><img src="img/01_10.png" /></label>
      </li>      
      <input id="01_11" type="checkbox" value="01_11.png" name="image">
      <li>
        <label for="01_11"><img src="img/01_11.png" /></label>
      </li>      
      <input id="01_12" type="checkbox" value="01_12.png" name="image">
      <li>
        <label for="01_12"><img src="img/01_12.png" /></label>
      </li>      
      <input id="01_13" type="checkbox" value="01_13.png" name="image">
      <li>
        <label for="01_13"><img src="img/01_13.png" /></label>
      </li>      
      <input id="01_14" type="checkbox" value="01_14.png" name="image">
      <li>
        <label for="01_14"><img src="img/01_14.png" /></label>
      </li>      
      <input id="02_01" type="checkbox" value="02_01.png" name="image">
      <li>
        <label for="02_01"><img src="img/02_01.png" /></label>
      </li>      
      <input id="02_02" type="checkbox" value="02_02.png" name="image">
      <li>
        <label for="02_02"><img src="img/02_02.png" /></label>
      </li>      
      <input id="02_03" type="checkbox" value="02_03.png" name="image">
      <li>
        <label for="02_03"><img src="img/02_03.png" /></label>
      </li>      
      <input id="02_04" type="checkbox" value="02_04.png" name="image">
      <li>
        <label for="02_04"><img src="img/02_04.png" /></label>
      </li>      
      <input id="02_05" type="checkbox" value="02_05.png" name="image">
      <li>
        <label for="02_05"><img src="img/02_05.png" /></label>
      </li>      
      <input id="03_01" type="checkbox" value="03_01.png" name="image">
      <li>
        <label for="03_01"><img src="img/03_01.png" /></label>
      </li>      
      <input id="03_02" type="checkbox" value="03_02.png" name="image">
      <li>
        <label for="03_02"><img src="img/03_02.png" /></label>
      </li>      
      <input id="03_03" type="checkbox" value="03_03.png" name="image">
      <li>
        <label for="03_03"><img src="img/03_03.png" /></label>
      </li>      
      <input id="03_04" type="checkbox" value="03_04.png" name="image">
      <li>
        <label for="03_04"><img src="img/03_04.png" /></label>
      </li>      
      <input id="03_05" type="checkbox" value="03_05.png" name="image">
      <li>
        <label for="03_05"><img src="img/03_05.png" /></label>
      </li>      
      <input id="03_06" type="checkbox" value="03_06.png" name="image">
      <li>
        <label for="03_06"><img src="img/03_06.png" /></label>
      </li>      
      <input id="03_99" type="checkbox" value="03_99.png" name="image">
      <li>
        <label for="03_99"><img src="img/03_99.png" /></label>
      </li>      
      <input id="04_01" type="checkbox" value="04_01.png" name="image">
      <li>
        <label for="04_01"><img src="img/04_01.png" /></label>
      </li>      
      <input id="04_02" type="checkbox" value="04_02.png" name="image">
      <li>
        <label for="04_02"><img src="img/04_02.png" /></label>
      </li>      
      <input id="04_03" type="checkbox" value="04_03.png" name="image">
      <li>
        <label for="04_03"><img src="img/04_03.png" /></label>
      </li>      
      <input id="04_04" type="checkbox" value="04_04.png" name="image">
      <li>
        <label for="04_04"><img src="img/04_04.png" /></label>
      </li>      
      <input id="04_05" type="checkbox" value="04_05.png" name="image">
      <li>
        <label for="04_05"><img src="img/04_05.png" /></label>
      </li>      
      <input id="04_06" type="checkbox" value="04_06.png" name="image">
      <li>
        <label for="04_06"><img src="img/04_06.png" /></label>
      </li>      
      <input id="04_07" type="checkbox" value="04_07.png" name="image">
      <li>
        <label for="04_07"><img src="img/04_07.png" /></label>
      </li>      
      <input id="04_99" type="checkbox" value="04_99.png" name="image">
      <li>
        <label for="04_99"><img src="img/04_99.png" /></label>
      </li>      
      <input id="05_01" type="checkbox" value="05_01.png" name="image">
      <li>
        <label for="05_01"><img src="img/05_01.png" /></label>
      </li>      
      <input id="05_02" type="checkbox" value="05_02.png" name="image">
      <li>
        <label for="05_02"><img src="img/05_02.png" /></label>
      </li>      
      <input id="05_03" type="checkbox" value="05_03.png" name="image">
      <li>
        <label for="05_03"><img src="img/05_03.png" /></label>
      </li>      
      <input id="05_04" type="checkbox" value="05_04.png" name="image">
      <li>
        <label for="05_04"><img src="img/05_04.png" /></label>
      </li>      
      <input id="05_05" type="checkbox" value="05_05.png" name="image">
      <li>
        <label for="05_05"><img src="img/05_05.png" /></label>
      </li>      
      <input id="05_06" type="checkbox" value="05_06.png" name="image">
      <li>
        <label for="05_06"><img src="img/05_06.png" /></label>
      </li>      
      <input id="05_99" type="checkbox" value="05_99.png" name="image">
      <li>
        <label for="05_99"><img src="img/05_99.png" /></label>
      </li>
      <input id="06_01" type="checkbox" value="06_01.png" name="image">
      <li>
        <label for="06_01"><img src="img/06_01.png" /></label>
      </li>      
      <input id="06_02" type="checkbox" value="06_02.png" name="image">
      <li>
        <label for="06_02"><img src="img/06_02.png" /></label>
      </li>      
      <input id="06_03" type="checkbox" value="06_03.png" name="image">
      <li>
        <label for="06_03"><img src="img/06_03.png" /></label>
      </li>      
      <input id="06_04" type="checkbox" value="06_04.png" name="image">
      <li>
        <label for="06_04"><img src="img/06_04.png" /></label>
      </li>      
      <input id="06_05" type="checkbox" value="06_05.png" name="image">
      <li>
        <label for="06_05"><img src="img/06_05.png" /></label>
      </li>      
      <input id="06_06" type="checkbox" value="06_06.png" name="image">
      <li>
        <label for="06_06"><img src="img/06_06.png" /></label>
      </li>      
      <input id="07_01" type="checkbox" value="07_01.png" name="image">
      <li>
        <label for="07_01"><img src="img/07_01.png" /></label>
      </li>      
      <input id="07_02" type="checkbox" value="07_02.png" name="image">
      <li>
        <label for="07_02"><img src="img/07_02.png" /></label>
      </li>
      <input id="07_03" type="checkbox" value="07_03.png" name="image">
      <li>
        <label for="07_03"><img src="img/07_03.png" /></label>
      </li>
      <input id="08_01" type="checkbox" value="08_01.png" name="image">
      <li>
        <label for="08_01"><img src="img/08_01.png" /></label>
      </li>  
      <input id="08_02" type="checkbox" value="08_02.png" name="image">
      <li>
        <label for="08_02"><img src="img/08_02.png" /></label>
      </li>  
      <input id="08_03" type="checkbox" value="08_03.png" name="image">
      <li>
        <label for="08_03"><img src="img/08_03.png" /></label>
      </li>  
      <input id="08_04" type="checkbox" value="08_04.png" name="image">
      <li>
        <label for="08_04"><img src="img/08_04.png" /></label>
      </li>  
      <input id="08_05" type="checkbox" value="08_05.png" name="image">
      <li>
        <label for="08_05"><img src="img/08_05.png" /></label>
      </li>  
      <input id="08_06" type="checkbox" value="08_06.png" name="image">
      <li>
        <label for="08_06"><img src="img/08_06.png" /></label>
      </li>
      <input id="08_99" type="checkbox" value="08_99.png" name="image">
      <li>
        <label for="08_99"><img src="img/08_99.png" /></label>
      </li>  
      <input id="09_01" type="checkbox" value="09_01.png" name="image">
      <li>
        <label for="09_01"><img src="img/09_01.png" /></label>
      </li>  
      <input id="09_02" type="checkbox" value="09_02.png" name="image">
      <li>
        <label for="09_02"><img src="img/09_02.png" /></label>
      </li>
      <input id="09_03" type="checkbox" value="09_03.png" name="image">
      <li>
        <label for="09_03"><img src="img/09_03.png" /></label>
      </li>
      <input id="09_04" type="checkbox" value="09_04.png" name="image">
      <li>
        <label for="09_04"><img src="img/09_04.png" /></label>
      </li>
      <input id="09_99" type="checkbox" value="09_99.png" name="image">
      <li>
        <label for="09_99"><img src="img/09_99.png" /></label>
      </li>
      <input id="10_01" type="checkbox" value="10_01.png" name="image">
      <li>
        <label for="10_01"><img src="img/10_01.png" /></label>
      </li>
      <input id="11_02" type="checkbox" value="11_02.png" name="image">
      <li>
        <label for="11_02"><img src="img/11_02.png" /></label>
      </li>
      <input id="11_99" type="checkbox" value="11_99.png" name="image">
      <li>
        <label for="11_99"><img src="img/11_99.png" /></label>
      </li>
      <input id="12_01" type="checkbox" value="12_01.png" name="image">
      <li>
        <label for="12_01"><img src="img/12_01.png" /></label>
      </li>
      <input id="12_02" type="checkbox" value="12_02.png" name="image">
      <li>
        <label for="12_02"><img src="img/12_02.png" /></label>
      </li>
      <input id="12_99" type="checkbox" value="12_99.png" name="image">
      <li>
        <label for="12_99"><img src="img/12_99.png" /></label>
      </li>
    </ul>
    <div id="counter"></div>
  </body>
</html>